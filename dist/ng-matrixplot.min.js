/*! ng-matrixplot 
 MIT 29-09-2015 alejandro gallo <alejandroamsg@hotmail.com> */
function MatrixPlotClass(a,b){var c=this;c.initParameters=function(){c.settings=b,a.width=c.settings.options.width,a.height=c.settings.options.height,c.maincolor=c.settings.options.color||"120",rows=c.settings.data.length;try{cols=c.settings.data[0].length}catch(d){console.log(d),cols=0}c.pixelWidth=c.settings.options.width/cols,c.pixelHeight=c.settings.options.height/rows,c.context=a.getContext("2d"),c.context.clearRect(0,0,c.settings.options.width,c.settings.options.height)},c.draw=function(){c.settings.data.forEach(function(a,b){a.forEach(function(a,d){c.context.beginPath(),c.context.rect(d*c.pixelWidth,b*c.pixelHeight,c.pixelWidth,c.pixelHeight),c.context.fillStyle="hsl("+c.maincolor+", 100%,"+a+"%)",c.context.fill()})})},c.refresh=function(a){c.settings=a,c.initParameters(),c.draw()}}var matrixplot=function(a,b){var c=new MatrixPlotClass(a,b);return c};angular.module("ng-matrixplot",[]).directive("matrixPlot",["$parse",function(a){return{restrict:"EA",template:"<canvas> </canvas>",link:function(b,c,d){var e=c.find("canvas")[0],f=a(d.settings)(b),g=matrixplot(e,f);b.$watch(d.settings,function(a,b){a&&g.refresh(a)},!0)}}}]);